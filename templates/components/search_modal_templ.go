// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.943
package components

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import "sudo/internal/models"

func SearchModal(boards []models.Board) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div id=\"search-modal\" class=\"hidden fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center pt-16 z-50\"><div class=\"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4\"><div class=\"p-4 border-b border-gray-200\"><div class=\"relative\"><input type=\"text\" id=\"global-search\" placeholder=\"Search tasks, boards, and team members...\" class=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg\" onkeyup=\"performGlobalSearch(this.value)\" onkeydown=\"handleSearchKeys(event)\"><div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"><svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path></svg></div><div class=\"absolute inset-y-0 right-0 pr-3 flex items-center\"><button onclick=\"document.getElementById('search-modal').classList.add('hidden')\" class=\"text-gray-400 hover:text-gray-600\"><svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path></svg></button></div></div></div><div class=\"max-h-96 overflow-y-auto\"><!-- Search Results --><div id=\"search-results\" class=\"p-4\"><!-- Quick Actions --><div class=\"mb-6\"><h3 class=\"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3\">Quick Actions</h3><div class=\"space-y-2\"><button onclick=\"openCreateTaskModal()\" class=\"w-full flex items-center px-3 py-2 text-left text-gray-700 hover:bg-gray-100 rounded-md\"><svg class=\"w-5 h-5 mr-3 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"></path></svg> Create new task</button> <button onclick=\"openCreateBoardModal()\" class=\"w-full flex items-center px-3 py-2 text-left text-gray-700 hover:bg-gray-100 rounded-md\"><svg class=\"w-5 h-5 mr-3 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\"></path></svg> Create new board</button></div></div><!-- Recent Boards --><div class=\"mb-6\"><h3 class=\"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3\">Recent Boards</h3><div class=\"space-y-2\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		for _, board := range boards[:min(5, len(boards))] {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<a href=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var2 templ.SafeURL
			templ_7745c5c3_Var2, templ_7745c5c3_Err = templ.JoinURLErrs("/boards/" + board.ID.String())
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/components/search_modal.templ`, Line: 70, Col: 72}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var2))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "\" class=\"flex items-center px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-md\" onclick=\"closeSearch()\"><div class=\"w-5 h-5 mr-3 bg-blue-500 rounded flex-shrink-0\"></div><div class=\"flex-1 min-w-0\"><div class=\"font-medium truncate\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 string
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(board.Title)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/components/search_modal.templ`, Line: 76, Col: 86}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "</div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if board.Description != "" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "<div class=\"text-sm text-gray-500 truncate\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var4 string
				templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(board.Description)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/components/search_modal.templ`, Line: 78, Col: 106}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "</div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "</div></a>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "</div></div><!-- Search Results Container --><div id=\"dynamic-search-results\" class=\"hidden\"><h3 class=\"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3\">Search Results</h3><div id=\"search-results-content\" class=\"space-y-2\"><!-- Results will be populated here --></div></div><!-- No Results --><div id=\"no-results\" class=\"hidden text-center py-8\"><svg class=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path></svg><h3 class=\"mt-2 text-sm font-medium text-gray-900\">No results found</h3><p class=\"mt-1 text-sm text-gray-500\">Try searching with different keywords</p></div></div></div><!-- Footer --><div class=\"border-t border-gray-200 px-4 py-3\"><div class=\"flex items-center justify-between text-xs text-gray-500\"><div class=\"flex items-center space-x-4\"><div class=\"flex items-center\"><kbd class=\"inline-flex items-center px-2 py-1 bg-gray-100 border border-gray-300 rounded text-xs\">↑</kbd> <kbd class=\"inline-flex items-center px-2 py-1 bg-gray-100 border border-gray-300 rounded text-xs ml-1\">↓</kbd> <span class=\"ml-2\">to navigate</span></div><div class=\"flex items-center\"><kbd class=\"inline-flex items-center px-2 py-1 bg-gray-100 border border-gray-300 rounded text-xs\">Enter</kbd> <span class=\"ml-2\">to select</span></div></div><div class=\"flex items-center\"><kbd class=\"inline-flex items-center px-2 py-1 bg-gray-100 border border-gray-300 rounded text-xs\">Esc</kbd> <span class=\"ml-2\">to close</span></div></div></div></div></div><script>\r\n        let searchResults = [];\r\n        let selectedIndex = -1;\r\n        \r\n        function performGlobalSearch(query) {\r\n            const resultsContainer = document.getElementById('search-results-content');\r\n            const dynamicResults = document.getElementById('dynamic-search-results');\r\n            const noResults = document.getElementById('no-results');\r\n            \r\n            if (query.length < 2) {\r\n                dynamicResults.classList.add('hidden');\r\n                noResults.classList.add('hidden');\r\n                return;\r\n            }\r\n            \r\n            // Simulate API search call\r\n            fetch(`/api/search?q=${encodeURIComponent(query)}`, {\r\n                credentials: 'include'\r\n            })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                searchResults = data.results || [];\r\n                selectedIndex = -1;\r\n                \r\n                if (searchResults.length === 0) {\r\n                    dynamicResults.classList.add('hidden');\r\n                    noResults.classList.remove('hidden');\r\n                    return;\r\n                }\r\n                \r\n                noResults.classList.add('hidden');\r\n                dynamicResults.classList.remove('hidden');\r\n                \r\n                resultsContainer.innerHTML = searchResults.map((result, index) => {\r\n                    const icon = getResultIcon(result.type);\r\n                    return `\r\n                        <div class=\"search-result flex items-center px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-md cursor-pointer\" \r\n                             data-index=\"${index}\" \r\n                             onclick=\"selectResult(${index})\">\r\n                            ${icon}\r\n                            <div class=\"flex-1 min-w-0\">\r\n                                <div class=\"font-medium truncate\">${result.title}</div>\r\n                                <div class=\"text-sm text-gray-500 truncate\">${result.description || result.board_title || ''}</div>\r\n                            </div>\r\n                            <div class=\"text-xs text-gray-400 ml-2\">${result.type}</div>\r\n                        </div>\r\n                    `;\r\n                }).join('');\r\n            })\r\n            .catch(error => {\r\n                console.error('Search error:', error);\r\n                dynamicResults.classList.add('hidden');\r\n                noResults.classList.remove('hidden');\r\n            });\r\n        }\r\n        \r\n        function getResultIcon(type) {\r\n            const icons = {\r\n                task: '<svg class=\"w-5 h-5 mr-3 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path></svg>',\r\n                board: '<svg class=\"w-5 h-5 mr-3 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\"></path></svg>',\r\n                user: '<svg class=\"w-5 h-5 mr-3 text-purple-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path></svg>'\r\n            };\r\n            return icons[type] || icons.task;\r\n        }\r\n        \r\n        function handleSearchKeys(event) {\r\n            const results = document.querySelectorAll('.search-result');\r\n            \r\n            switch (event.key) {\r\n                case 'ArrowDown':\r\n                    event.preventDefault();\r\n                    selectedIndex = Math.min(selectedIndex + 1, results.length - 1);\r\n                    updateSelection(results);\r\n                    break;\r\n                case 'ArrowUp':\r\n                    event.preventDefault();\r\n                    selectedIndex = Math.max(selectedIndex - 1, -1);\r\n                    updateSelection(results);\r\n                    break;\r\n                case 'Enter':\r\n                    event.preventDefault();\r\n                    if (selectedIndex >= 0 && selectedIndex < searchResults.length) {\r\n                        selectResult(selectedIndex);\r\n                    }\r\n                    break;\r\n                case 'Escape':\r\n                    event.preventDefault();\r\n                    closeSearch();\r\n                    break;\r\n            }\r\n        }\r\n        \r\n        function updateSelection(results) {\r\n            results.forEach((result, index) => {\r\n                result.classList.toggle('bg-gray-100', index === selectedIndex);\r\n            });\r\n        }\r\n        \r\n        function selectResult(index) {\r\n            const result = searchResults[index];\r\n            if (!result) return;\r\n            \r\n            switch (result.type) {\r\n                case 'task':\r\n                    window.location.href = `/boards/${result.board_id}#task-${result.id}`;\r\n                    break;\r\n                case 'board':\r\n                    window.location.href = `/boards/${result.id}`;\r\n                    break;\r\n                case 'user':\r\n                    // Handle user profile or mention\r\n                    break;\r\n            }\r\n            \r\n            closeSearch();\r\n        }\r\n        \r\n        function closeSearch() {\r\n            document.getElementById('search-modal').classList.add('hidden');\r\n            document.getElementById('global-search').value = '';\r\n            document.getElementById('dynamic-search-results').classList.add('hidden');\r\n            document.getElementById('no-results').classList.add('hidden');\r\n        }\r\n        \r\n        function openCreateTaskModal() {\r\n            closeSearch();\r\n            document.getElementById('task-form-modal')?.classList.remove('hidden');\r\n        }\r\n        \r\n        function openCreateBoardModal() {\r\n            closeSearch();\r\n            document.getElementById('create-board-modal')?.classList.remove('hidden');\r\n        }\r\n        \r\n        // Global keyboard shortcut to open search\r\n        document.addEventListener('keydown', function(event) {\r\n            if ((event.ctrlKey || event.metaKey) && event.key === 'k') {\r\n                event.preventDefault();\r\n                document.getElementById('search-modal').classList.remove('hidden');\r\n                document.getElementById('global-search').focus();\r\n            }\r\n        });\r\n    </script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
